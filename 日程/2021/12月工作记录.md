### 监控系统产品化能力提升

1. 业务指标系统规划设计 12.12 @闫野 @冯庚平
2. 业务指标系统后端存储 tdengine 预研, 完成基于 kafka 写入工具 demo 12.20 @闫野 @冯庚平
3. 业务指标采集工具需求, 完成 kafka 日志接收功能, 支持在线 metric 接收 12.12 @冯庚平
4. 业务指标采集工具后端存储模块改为插件式, 支持 opentsdb 与 tdengine 12.20 @冯庚平
5. 跟踪业务切换上报指标到指标采集工具 12.30 @冯庚平
6. 持续优化夜莺告警组与告警策略 12.30 @闫野 @冯庚平
7. realtime 发送系统增加批量发送 12.5 @冯庚平
8. 完成腾讯云基础监控、服务监控、容器云监控部署与告警配置 12.15 @闫野 @冯庚平

### 12-3

1. 解决了 realtime 空指针的问题。
   最大接口数，原本设置的 1000，自动扫描后，变成 2500。改配置的时候，有个地方没有改
2. 把所有业务的配置导入进去，盯着他们改好
3. TDengine 预研

### 12-8

1. 研究 taos，总结了下内容
2. 修了个 realtime 的 bug，gslb 的配置文件变化后，程序捕捉不到
3. recieveAlarm 把 kafka 又加上去了，验证还是没问题
4. 需要给海外整理 realtime 和接口监控数据

### 12-9

1. realtime 的 bug，搞了一上午
   是 defer 的位置不对。defer 应该尽可能在所有需要的数据都确认正常的情况下，再加上去。而不是之前理解的，自动在 return 的时候执行。实际上，在代码执行到 defer 的时候，数据已经进行了加载，只是到 return 的时候再执行。
2. 海外监控整理
   token 不监控的问题确认，李钟麟把 url 直接复制上去，没有替换 token
   realtime 接口统计，统计出了一天的数据，存邮箱草稿
   可用性及同环比，目前看也有，falcon 里面也有数据。明天再看一下告警

### 12-13

1. 海外的监控搞完，监控都给加好了
2. realtime 在 fmp 的页面替换完成，原来的预览页删掉

### 12-14

1. 研究了一下 victoriaMetric
2.

### 12-15

1. 同环比有个 bug，改了
2. realtime 推送失败率过高原因调查。推送到夜莺 transfer 首包时间极长，超过 10 秒，严重影响性能。迁回 openfalcon
3. 告警接收组件，测试了几个小模块，都可以。明天直接复制过去就行了
4.

### 12-17

1. 报账
2. 研究了几个 go 处理 json 的库。全部都需要知道确切的数据结构，不然没法用
3. 周报

### 12-22

1. 告警接收组件，这几天做完了
2. 给王鹏画了一个多活的面板

### 12-23

1. realtime 从 gslb 拉取数据的时候，存在错误。
   本来是不存在 249 这个 ip 的，但是 realtime 这边却拿到了。增加了获取的文本原稿和解析结果的记录，看看是不是解析的问题
2. fmp 接口部分在升级的时候，没有把 realtime_conf_tmp 表的数据替换到 realtime_conf 里面，导致业务改了一顿白改了。好在有备份，恢复回去了
3. 支付向 receiveAlarm 发送的数据都没有找到
   目前日志量太大了。不知道是没发过来，还是没有解析好。
   再一个，发送的 counterType 字段的值错了，应该是 GAUGE。不知道有没有影响

4. 明天要搞一下告警接收，historage 上线了，但是没有收到告警
5. realtime 改 user-agent，还有不好用的——因为重新整了 realtime 表的数据，很可能和业务已经整理好的冲突了
6. 双活的 grafana 面板要求：
   选 namespace，能跟着就过滤域名、table，最好加上表
   总的 qps 要有一条百分比的曲线——这个东西要重新算，需要再启动一个脚本：从 opentsdb 取数据，然后再算一遍
   一个 namespace 一个折叠组
   饼图不要了
   每个域名下关联的 top20 接口

### 12-24

1. 昨天遗留问题解决
   告警接收，因为对面发的时间戳不对，应该是秒，发了个毫秒
   realtime 接口问题，有 5 个项目没有，下周找业务的人对一下。另外不对了，差不了多少，反正有问题肯定能监控到。下周把接口自动添加开开
   user-agent 没有时间搞

2. 新增问题：
   谭浩的电商有接口同环比数据没有了，需要看一下。
   双活 grafana 图，把关联请求弄好了。这样就加个百分比的曲线。
   加百分比曲线
   把接口的柄图弄到下面
   给域名表增加多活字段
   王鹏还要个 top20 接口，这个不好弄，等看看有什么办法弄弄

### 12-27

1. realtime 的 user-agent 搞好了。焦峰没有升级阿里云的版本，导致总有接口不好用
2. 谭浩问题解决了。fmp 一次最多传 4000 条，接口总数已近超过 4000 了，导致总有一部分接口拿不到，自然就不会去 clickhouse 拿数据。这个问题在 idc 已经改了，阿里云给漏掉了。
3. 在 mac 上装了个 windows，结果获取不到 IP 没法上网
4. 王鹏要的还没有搞

### 12-31

1. 对着设计做就行了
2. 画图
