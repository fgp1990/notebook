# ç¿»å¢™ç›¸å…³

è¿™æ˜¯ä»ç½‘ä¸Šä¸‹è½½çš„ä¸€ä¸ªè‡ªåŠ¨åŒ–éƒ¨ç½² shadowsocket çš„è„šæœ¬è¯´æ˜

æœ€è¿‘ä¹°äº†ä¸ª Â VultrÂ  ç©ç©ï¼Œæœ‰äº† Â VPSÂ  å¯ä»¥åšäº›è‡ªå·±å–œæ¬¢çš„äº‹æƒ…ï¼Œæ¯”å¦‚æ­ Â blogï¼Œwikiï¼Œgitï¼Œç§æœ‰äº‘ç­‰ç­‰ã€‚

- å°å°¾å·´ï¼šé€šè¿‡è¿™ä¸ªé“¾æ¥æ³¨å†Œ Â Vultrï¼Œä½ çš„è´¦æˆ·å¯ä»¥ç›´æ¥å¾—åˆ° Â 10Â  åˆ€ã€‚
- å¦‚æœ‰éœ€è¦ Â SSÂ  è´¦å·ï¼Œå¯ä»¥ç›´æ¥ Â  å¡«å†™ç”³è¯·ã€‚

## å®‰è£… Â Shadowsocks

### å®‰è£…ç¯å¢ƒï¼šCentOSÂ 6.8Â x64

é¦–å…ˆä½¿ç”¨ Â rootÂ  ç”¨æˆ·ç™»å½•ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ Â ShadowsocksRÂ  ä¸€é”®å®‰è£…è„šæœ¬ï¼Œä¾æ¬¡è¿è¡Œä¸‹åˆ—å‘½ä»¤ï¼š

### ä¸‹è½½è„šæœ¬

wgetÂ --no-check-certificateÂ https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.sh

### æ›´æ”¹è„šæœ¬æƒé™

chmodÂ +xÂ shadowsocksR.sh

### å®‰è£…

./shadowsocksR.shÂ 2>&1Â |Â teeÂ shadowsocksR.log
å®‰è£…æˆåŠŸä¼šæœ‰å¦‚ä¸‹æç¤ºï¼š
æ­¤å¤„åº”æœ‰å›¾ï¼Œæ²¡äº†

è¯¥è„šæœ¬å·²ç»è‡ªåŠ¨å°† Â ShadowsocksÂ  åŠ å…¥å¼€æœºè‡ªå¯ï¼Œå®‰è£…å®Œæˆ Â ShadowsocksÂ  å°±å·²ç»å¯åŠ¨äº†ã€‚ShadowsocksÂ  çš„é…ç½®æ–‡ä»¶åœ¨ï¼š
/etc/shadowsocks.json

### å¸è½½

å¦‚æœéœ€è¦å¸è½½ Â ShadowsocksRï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªå‘½ä»¤ï¼š
./shadowsocksR.shÂ uninstall

### å…¶ä»–å‘½ä»¤

å¯åŠ¨ï¼š/etc/init.d/shadowsocksÂ start
åœæ­¢ï¼š/etc/init.d/shadowsocksÂ stop
é‡å¯ï¼š/etc/init.d/shadowsocksÂ restart
çŠ¶æ€ï¼š/etc/init.d/shadowsocksÂ status
ShadowsocksÂ  ç®—æ˜¯å®‰è£…å¥½äº†ï¼Œä¸è¿‡é€Ÿåº¦å¾ˆä¸ç†æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Â ServerSpeederÂ  å¯¹å®ƒè¿›è¡ŒåŠ é€Ÿã€‚

## å®‰è£… Â ServerSpeederÂ (é”é€Ÿ)

é”é€Ÿï¼ˆserverspeederï¼‰ï¼Œæ˜¯ä¸€æ¬¾å•è¾¹ Â TCPÂ  åŠ é€Ÿç¨‹åºï¼Œèƒ½å¤Ÿå¢å¼º VPS/æœåŠ¡å™¨è¿æ¥çš„ç¨³å®šæ€§ï¼Œä¸”æœ‰æ•ˆçš„æé«˜æœåŠ¡å™¨çš„å¸¦å®½åˆ©ç”¨ç‡ï¼Œè¿›è€Œæé«˜è®¿é—®é€Ÿåº¦ã€‚
å®‰è£…è„šæœ¬å¦‚ä¸‹ï¼š

```
wgetÂ -NÂ --no-check-certificateÂ https://raw.githubusercontent.com/91yun/serverspeeder/master/serverspeeder-all.shÂ &&Â bashÂ serverspeeder-all.shÂ Â 
```

ç”±äºé”é€Ÿå¯¹æ“ä½œç³»ç»Ÿå†…æ ¸è¦æ±‚è¾ƒé«˜ï¼Œæ‰€ä»¥å®‰è£…è¿‡ç¨‹ä¸­å¾ˆå¯èƒ½å‡ºç°ä¸‹é¢è¿™ä¸ªé”™è¯¯ï¼š
æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†æ“ä½œç³»ç»Ÿå†…æ ¸æ›´æ¢ä¸ºé”é€Ÿè¦æ±‚çš„ç‰ˆæœ¬ã€‚å¯ä»¥åœ¨ Â  è¿™é‡Œ Â  æŸ¥çœ‹é”é€Ÿæ”¯æŒçš„æ“ä½œç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ã€‚

### æ›´æ¢å†…æ ¸

æˆ‘çš„æ“ä½œç³»ç»Ÿæ˜¯ Â CentOSÂ 6ï¼Œå½“å‰å†…æ ¸ç‰ˆæœ¬æ˜¯ï¼š2.6.32-642.1.1.el6.x86_64ï¼Œéœ€è¦æ›´æ¢ä¸ºï¼š2.6.32-504.3.3.el6.x86_64ã€‚
rpmÂ -ivhÂ http://soft.91yun.org/ISO/Linux/CentOS/kernel/kernel-firmware-2.6.32-504.3.3.el6.noarch.rpmÂ Â 
rpmÂ -ivhÂ http://soft.91yun.org/ISO/Linux/CentOS/kernel/kernel-2.6.32-504.3.3.el6.x86_64.rpmÂ --forceÂ Â 
å¦‚æœæ“ä½œç³»ç»Ÿæ˜¯ Â CentOSÂ 7ï¼Œå¯ä»¥å°†å†…æ ¸æ›´æ–°ä¸º Â 3.10.0-229.1.2.el7.x86_64ï¼š
rpmÂ -ivhÂ http://soft.91yun.org/ISO/Linux/CentOS/kernel/kernel-3.10.0-229.1.2.el7.x86_64.rpmÂ --forceÂ Â 
æŸ¥çœ‹å†…æ ¸æ˜¯å¦æ›´æ¢æˆåŠŸï¼š
rpmÂ -qaÂ |Â grepÂ kernelÂ Â 
æˆåŠŸåéœ€è¦é‡å¯ï¼Œä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š
rebootÂ Â 
é‡å¯å®Œæˆåï¼Œé‡æ–°æ‰§è¡Œé”é€Ÿçš„å®‰è£…è„šæœ¬ã€‚
å®‰è£…æˆåŠŸé”é€Ÿåä¼šæç¤ºï¼š
okï¼Œç°åœ¨å¯ä»¥è¯•è¯• Â ShadowsocksÂ  çš„é€Ÿåº¦äº†ï¼š

YouTubeÂ 4KÂ  æ— å‹åŠ›ï¼ä¹‹å‰æ‰å‹‰å¼ºèƒ½æµç•…æ’­æ”¾ Â 1080Pã€‚
é”é€Ÿå…¶ä»–å‘½ä»¤ï¼š
é‡å¯ï¼š/serverspeeder/bin/serverSpeeder.shÂ restart
å…³é—­ï¼š/serverspeeder/bin/serverSpeeder.shÂ stop
å¯åŠ¨ï¼š/serverspeeder/bin/serverSpeeder.shÂ start
å¸è½½ï¼š./serverSpeederInstaller.shÂ uninstall
çŠ¶æ€æŸ¥çœ‹ï¼šserviceÂ serverSpeederÂ status
é…ç½®æ–‡ä»¶ï¼š/serverspeeder/etc/config
ä¸º Â ShadowsocksÂ  æ·»åŠ å¤šä¸ªç«¯å£å’Œå¯†ç 
å¦‚æœä½ æƒ³å°† Â ShadowsocksÂ  è´¦å·å‡ºå”®ç»™å…¶ä»–äººï¼Œæˆ–è€…å¸Œæœ›å°†è´¦å·å…±äº«ç»™æœ‹å‹ï¼Œåˆä¸æƒ³å’Œä»–ä½¿ç”¨åŒä¸€ä¸ªå¯†ç ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦ç»™ Â ShadowsocksÂ  æ·»åŠ å¤šä¸ªç«¯å£å’Œå¯†ç ï¼Œå…·ä½“è¿˜æ˜¯éœ€è¦ä¿®æ”¹ Â ShadowsocksÂ  çš„é…ç½®æ–‡ä»¶ï¼š
viÂ /etc/shadowsocks.jsonÂ Â 
é»˜è®¤çš„å•ä¸ªç«¯å£çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š

```
{
Â Â Â Â "server":"0.0.0.0",
Â Â Â Â "server_ipv6":"::",
Â Â Â Â "server_port":8000,
Â Â Â Â "local_address":"127.0.0.1",
Â Â Â Â "local_port":1080,
Â Â Â Â "password":"123456",
Â Â Â Â "timeout":120,
Â Â Â Â "method":"aes-256-cfb",
Â Â Â Â "protocol":"origin",
Â Â Â Â "protocol_param":"",
Â Â Â Â "obfs":"plain",
Â Â Â Â "obfs_param":"",
Â Â Â Â "redirect":"",
Â Â Â Â "dns_ipv6":false,
Â Â Â Â "fast_open":false,
Â Â Â Â "workers":1
}
```

ä½ éœ€è¦å°†å…¶ä¸­çš„ Â server_portÂ  å’Œ Â passwordÂ  åˆ æ‰ï¼Œå¹¶ä¸”æ·»åŠ  Â port_passwordÂ  çš„å­—æ®µï¼š

```
"port_password":
{
Â Â Â Â "8000":"password1",
Â Â Â Â "8001":"password2",
Â Â Â Â "8002":"password3"
},
```

ä¿®æ”¹å¥½ä¹‹åï¼Œé‡å¯ Â Shadowsocksï¼š

```
/etc/init.d/shadowsocksÂ restart
```

å¯åŠ¨æ­£å¸¸ï¼Œç„¶è€Œæµ‹è¯•å‘ç°ï¼Œæ–°å¢çš„ç«¯å£å‡ä¸èƒ½è®¿é—®ã€‚ç»è¿‡ Â GoogleÂ  å¾—çŸ¥ï¼Œç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯ Â CentOSÂ 6ï¼Œé˜²ç«å¢™æ²¡æœ‰é…ç½®ï¼Œæ‰€ä»¥æ–°å¢çš„ç«¯å£éƒ½è¢«é˜²ç«å¢™ç»™ç¦æ‰äº†ã€‚

CentOSÂ 7Â  çš„é˜²ç«å¢™é»˜è®¤ä½¿ç”¨çš„æ˜¯ Â firewallï¼Œä¹‹å‰çš„ç‰ˆæœ¬ä½¿ç”¨çš„æ˜¯ Â iptablesã€‚
æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å…³é—­ Â iptablesÂ  å°±å¯ä»¥äº†ï¼š
/etc/init.d/iptablesÂ stop
å…³é—­ä¹‹åï¼Œæ–°å¢çš„ç«¯å£éƒ½èƒ½æ­£å¸¸è®¿é—®äº†ã€‚ğŸ˜„
ä¸è¿‡ï¼Œç”±äºè‡ªå·±å¯¹ Â iptablesÂ  çš„ä½¿ç”¨ç»éªŒæœ‰é™ï¼Œå…³é—­ Â iptablesÂ  ä¹‹åä¸çŸ¥é“ä¼šä¸ä¼šå¯¹ç³»ç»Ÿé€ æˆä¸å¥½çš„å½±å“ï¼Œæ¯•ç«Ÿæ˜¯é˜²ç«å¢™ã€‚ã€‚ã€‚
